INSTALATION PROCEDURE
=====================

Installation from source:
"""""""""""""""""""""""""

get the ccid-x.y.z.tar.gz archive
$ tar xzvf ccid-x.y.z.tar.gz
$ cd ccid-x.y.z
$ ./configure
$ make
$ sudo make install

By default pcscd and my ccid driver use /usr/local/pcsc/drivers/ as
directory for hotplug drivers. If pcscd uses a different directory
(Debian pcscd uses /usr/lib/pcsc/drivers/) do:

$ ./configure --enable-usbdropdir=/usr/lib/pcsc/drivers/


more (or less) debug messages
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

You can also enable/disable some debug messages. The driver provides 4
levels of debug:
- critical: important error messages
- info:     informative messages like what reader was detected
- periodic: periodic info when pcscd test if a card is present (ever
            1/10 of a second)
- comm:     a dump of all the bytes exchanged between the host and the
            reader

By default messages of level "critical" and "info" are enabled and
messages of level "periodic" abd "comm" are off.

For example use --enable-debugcomm to enable communication debug and
--disable-debuginfo to disable info debug messages for example.


libusb not found
~~~~~~~~~~~~~~~~

If the ./configure script says something like:
  configure: error: usb.h not found, use --enable-libusb=PATH
You should use --enable-libusb=PATH to tell ./configure where to find
the usb.h and libusb.so files. The ./configure script will use
PATH/include/ to search for usb.h and PATH/lib/ to search for libusb.so


serial reader
~~~~~~~~~~~~~

The GemPCTwin reader can also be connected on a serial port. By default
the serial driver is built but not installed. You must explicitely do:
$ ./configure
$ make -C src install_ccidtwin


builing serial reader only
~~~~~~~~~~~~~~~~~~~~~~~~~~

It is possible to generate the driver for the GemPC Twin using serial
communication only (for example on an embedded system without USB).
Just do:
$ ./configure --disable-libusb
$ cd src ; make libccidtwin.la ; sudo make install_ccidtwin

You can use --enable-ccidtwindir=DIR to specify the target directory to
use. The default is $(prefix)/pcsc/drivers/serial with $(prefix) default
value /usr/local.


Binary installation:
""""""""""""""""""""

Contact your distribution support.


Test procedure:
"""""""""""""""

- check the reader is supported by the driver.
  Get your reader USB identification using the lsusb(1) command:
  $ lsusb
  [...]
  Bus 001 Device 048: ID 08e6:4433 Gemplus

  Look for 08E6 (ifdVendorID) and 4433 (ifdProductID) in
  /usr/local/pcsc/drivers/ifd-ccid.bundle/Contents/Info.plist
  Of course your numbers will be different.

  If you can't find them add them (if you know what you do) and/or mail me.

- (re)start pcscd with debug on stdout. Simply do 'pcscd --debug stdout'
  (you will need to have root priviledges). And look for:
  [...]
  readerfactory.c:1319 RFInitializeReader: Attempting startup of ReaderName
  readerfactory.c:1061 RFBindFunctions: Loading IFD Handler 2.0
  ifdhandler.c:76 Entering IFDHCreateChannel (lun: 0)
  ccid_usb.c:131 Manufacturer: Ludovic Rousseau (ludovic.rousseau@free.fr)
  ccid_usb.c:139 ProductString: Generic CCID reader v0.1.0
  ccid_usb.c:143 Copyright: This driver is protected by terms of the GNU General Public License version 2, or (at your option) any later version.
  ccid_usb.c:223 Found Vendor/Product: 08E6/4433 (GemPC433 SL)
  ccid_usb.c:224 Using USB bus/device: 001/047

  If you don't see this the driver is not installed correctly or your
  reader is not supported.

$Id$
